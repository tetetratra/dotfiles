" === main ===
set nocompatible " vi互換モードoff
filetype plugin indent on
syntax on
set virtualedit=block " vim の矩形選択で文字が無くても右へ進める
set showcmd
set wildmenu " コマンドモードでのタブでのファイル名補完
set number
set cursorline
set smartindent
set visualbell
set expandtab
set tabstop=2
set hlsearch " 検索結果をハイライト
set title
set noswapfile
set scrolloff=5 " スクロールする時に下が見えるようにする
set matchpairs& matchpairs+=<:> " 対応括弧に<と>のペアを追加
set showmatch " 対応括弧をハイライト表示する
set nowrap
set wildmenu " コマンドラインモードで<Tab>キーによるファイル名補完を有効にする
set smartcase " 小文字のみで検索したときに大文字小文字を無視する
set whichwrap=b,s,h,l,<,>,[,] " 行頭行末の左右移動で行をまたぐようにする
set backspace=indent,eol,start " Backspaceの影響範囲に制限を設けないようにする
" 自然な正規表現
nmap / /\v
" xで消したときにyankが書き換わらないようにする gT
noremap PP "0p
noremap x "_x
" 最後のカーソル位置を復元する
if has("autocmd")
  autocmd BufReadPost *
  \ if line("'\"") > 0 && line ("'\"") <= line("$") |
  \   exe "normal! g'\"" |
  \ endif
endif
" === mapping ===
inoremap <silent> jj <ESC>
imap <C-a> <C-o>:call <SID>home()<CR>
function! s:home()
  let start_column = col('.')
  normal! ^
  if col('.') == start_column
    normal! 0
  endif
  return ''
endfunction
imap <C-e> <End>
imap <C-d> <BackSpace>
imap <C-h> <Left>
imap <C-k> <Up>
imap <C-j> <Down>
imap <C-l> <Right>
imap <TAB> <C-n>
imap <S-TAB> <C-p>
" 検索で下にいってしまうのを抑える
" nnoremap * *N
" vnoremap * *N<esc>
" 貼り付けたテキストの末尾へ自動的に移動
nnoremap <silent> p p`]
" <Space>wを押してファイルを保存
nnoremap <Space>w :w<CR>
nnoremap <Space>q :bd<CR>
nnoremap <Esc> :noh<CR>
" :C コマンドでメッセージをクリップボードにコピー
" https://ja.stackoverflow.com/questions/40769
command C let @+ = execute("1messages")
" === color ===
augroup InsertHook
  autocmd!
  autocmd InsertEnter * hi Normal ctermbg=235 "挿入モード時の色
  autocmd InsertLeave * hi Normal ctermbg=0 "通常モード時の色
augroup END
