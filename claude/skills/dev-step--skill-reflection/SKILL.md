---
description: 現在リポジトリに配置されているスキルを改善するためのスキル。明示的に使用指示があった場合のみ使ってください。
---

## 目的
このスキルは、明示的にskill-reflectionスキルの使用指示があった場合のみ使ってください。

自身の作業を振り返り、リポジトリに配置されているclaudeスキルを改善します。
claudeスキルの改善により、次回以降の開発の効率化を目指します。

## 手順

1. 「スキルの改善材料」の収集
  - タスクの進行において行った作業を次の観点で振り返り、「スキルの改善材料」を集めてください（無い場合は無理に列挙する必要はありません）
    - 途中でユーザーから軌道修正や要望を受けた事柄
    - システムに関して勘違いをしたり、誤った情報を提供してしまった事柄
    - システムの理解をする上で、情報がまとめられておらず、調査に苦労した知識や手順
    - スキルを使った際に、スキルに記載されている情報が誤っていたり、不十分であった事柄
    - 定型的な手順を踏んだ作業であったにも関わらず、それがスキル化されていなかった事柄
  - 「スキルの改善材料」のうち、以下のような内容は追加・更新の対象外となります。そのような内容は除外してください
    - 作業におけるメモ的な情報や未確認の情報
    - 細かすぎる手順や、限定的なケースにしか適用されない情報

2. 「スキルの改善材料」から「スキルの改善候補」を蒸留
  - 集めた「スキルの改善材料」をもとに、スキルとしてふさわしい粒度・抽象度の「スキルの改善候補」を作成してください
  - 粒度の調整
    - たとえば「マイグレーション記述時は可逆性を確保する」という振り返り事項は、それ単体でスキル化するには細かすぎるスキルです。
      代わりに「マイグレーション記述時の作法」というようなスキル化するようにしてください
  - 抽象度の調整
    - たとえばユーザーとのやりとりで「◯◯のコードに✕✕のコメントを追加してください」という指摘があったとき、
      その指摘は本質的には「コードだけでは意図が伝わらない箇所には補足コメントを付けてほしい」という指摘だと思います。
    - このように、指摘が意味する本質を考え、今後の開発で役に立つ丁度よい抽象度でスキルの改善候補を考えてください。
  - 適切な粒度・抽象度の肌感については既存のスキルを参考にしてください

3. 既存スキルの確認
  - 既に定義済みのスキルのうち、「スキルの改善材料」や「スキルの改善候補」に関連がありそうなスキルの中身を一通り確認してください

4. 「スキルの改善候補」の分類
  - 「スキルの改善候補」それぞれについて、次の手順で対応方針を決定してください
    - if 既存スキルにその情報が記載済みだった場合（＝あなた（AI）がその既存スキルに気づけなかったということ）
      - → 対応方針: 既存スキルの説明の改善
    - else
      - if 改善候補の内容を書くべき別のスキルが既に存在している場合
        - → 対応方針: 既存スキルの内容の改善
      - else
        - → 対応方針: 新規スキルの追加
  - 続いて「スキルの改善候補」それぞれについて、スキル種別を次の観点で決定してください
    - 種別a：開発プロセスを行う際のステップ（手順）を提供するスキル
      - 例：「要件定義」「設計」「実装」のような、 **タスク・チケットを分解したときに現れるような各工程**
      - 注意点として、「開発環境におけるログイン方法」などは当てはまりません
    - 種別b：アプリケーション・リポジトリ・ドメインの固有の知識を提供するスキル
      - 例：「開発環境におけるログイン方法」「ユーザーの権限管理の仕組み」「◯◯機能の概要」「◯◯機能における✕✕の動作仕様」などの知識
    - 種別c：リポジトリ・ドメインに依存しない一般的な知識や、思考する際の価値観を提供するスキル
      - 例：「フィーチャーフラグ導入の判断指針」「マイグレーション記述時の作法」などの知識
      - 他のリポジトリにそのまま流用できるようなものが該当します

5. 改善内容の検討
  - 分類後の「スキルの改善候補」それぞれについて、対応方針に応じてその名前や内容を検討します。
    スキルの内容は「スキルの内容について」セクションを参考に考えてください。
    検討の結果、修正の取りやめや、改善候補1つにつき複数個のスキルの追加・更新が必要になっても構いません。
    - 対応方針: 既存スキルの説明の改善
      - 次に同じタスクを進める際に見落としが無いように、スキルの説明文を改善してください
    - 対応方針: 既存スキルの内容の改善
      - 既存スキルの内容を改善してください
    - 対応方針: 新規スキルの追加
      - 新規スキル名を決定し、その内容を検討してください
      - スキル種別に応じて、次のprefixをスキル名に付与してください
        - a: `dev-step--` prefixを付けます
        - b: `application--` prefixを付けます
        - c: `knowledge--` prefixを付けます

6. 追加・更新作業
  - スキルの追加・更新をしてください
    - スキルが置かれているディレクトリは、現在のリポジトリの `.claude/skills/` 配下です
      - ディレクトリが無い場合は作ってください
    - ディレクトリ名がスキルの名前になります
      - フォーマットとしては `.claude/skills/{スキル種別のprefix}{スキル名}/SKILL.md` となり、
        具体的には `.claude/skills/dev-step--skill-reflection/SKILL.md` のようなファイルパスとなります
  - スキルの中身に関してはテンプレートに従って、スキルファイルの追加・更新を行ってください

7. ユーザーへの報告
  - 追加・更新が完了したら、ユーザーに対して以下の内容を報告してください
    - 追加・更新したスキルの一覧（スキル名と簡単な説明）
    - スキル改善により、次回以降の開発がどのように効率化されるかの説明
  - 行った更新が問題ないかをユーザーに聞き、問題なければコミットしてください
    - 問題がある場合は、ユーザーの指示に従って修正を行ってください
  - コミット方法
    - 複数スキルの追加・更新をした場合もコミットは1つにまとめてください
    - コミットメッセージにはどのようなスキルを追加・更新したかを簡潔に日本語で記載してください

## スキルの内容について

- スキルの内容は、できるだけ本質的な情報に絞り、簡潔にまとめてください
- 必要に応じてmermaid等を使用して、図解を追加することも有用です
- スキルは少しずつ改善することを目指しているため、一度に大量の情報をスキル化する必要はありません
- 分量が多くなってしまう場合は、重要な情報を優先的に記載したり、内容を分割して複数スキルにするなどの工夫をしてください
- 「具体例」「実行例」のような、理解の補助のみを目的とした情報（＝ドキュメントの情報量が増えない情報）は、スキルの内容には含めないでください
- スキルの分量について、スキル種別ごとに以下の分量に収めるようにしてください
  - a. 作業をする際の手順を提供するスキル
    - 新規作成時：50行以内
    - 更新時：100行以内
  - b. アプリケーション・リポジトリ・ドメインの固有の知識を提供するスキル
    - 新規作成時：20行以内
    - 更新時：50行以内
  - c. 一般的な知識や、思考する際の価値観を提供するスキル
    - 新規作成時：20行以内
    - 更新時：50行以内

## スキルのテンプレート

スキル名がディレクトリ名と2重管理になってしまうのを防ぐために、ファイルのfront matterに `name:` セクションは **設けないでください**

```
---
description: {そのスキルがどんな情報を提供するスキルなのかを簡潔に説明してください}
---

{スキルの内容を記載してください}
```

## チェックリスト
- [ ] 手順通りに作業を行ったこと
- [ ] スキルのディレクトリに適切なprefixが付いていること
- [ ] スキルファイルの分量が指針通りの分量になっていること
