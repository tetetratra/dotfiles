---
name: pr-followup
description: PR作成後のCI失敗・レビュー指摘・コンフリクトを確認し、優先順位をつけて対応する。
---

PR作成後に発生する問題（CI失敗、レビュー指摘、コンフリクト）を確認し、優先順位をつけて対応します。

## 出力物

このコマンドでは、以下の3つのカテゴリで出力を行います：

- **返答**: 作業完了の報告や調査結果の要約など、フロー型の出力（会話として返す）
- **成果物**: ドキュメントや整理結果など、ストック型の出力（後から参照できる形で返す）
  - 成果物の保存先について指示がある場合は、指定された箇所に書き込む
  - 指示がない場合は、通常のレスポンスとして返答の後に続けて出力する
- **作業**: システムへの変更や実行など、副作用を伴う作業

本コマンドの出力：

**返答**: 何を確認し、何を修正したかを簡潔に報告し、レビューコメントへの返信案を提示する

**成果物**: なし

**作業**: CI失敗の修正、レビュー指摘の対応、コンフリクトの解消、コミット、プッシュ、PR説明の更新

## 目的

- PR作成後のCI失敗、レビュー指摘、コンフリクトなどの問題を把握する
- 優先順位をつけて対応する
- 修正後に適切に確認・コミット・プッシュする
- 必要に応じてPR説明を更新する

## 手順

### 1. PR状態の確認

以下を確認して、どのような問題があるかを把握する：

- CI状態の確認（`gh pr checks`）
  - 失敗しているジョブの特定
  - circleci等のMCPツールが使える場合、それを使って失敗しているテストやログを確認する
- レビューコメントの確認（`gh pr view --comments`）
  - 未解決のコメントを抽出
  - 対応が必要な指摘を整理
- コンフリクトの有無（`gh pr view` の Mergeable 状態）
  - コンフリクトが発生しているか確認

### 2. 対応優先度の決定

knowledge--pr-followup-priority スキルの指針に従って判断してください。

### 3. 追加の動作確認（必要な場合）

- レビュアーから指摘された追加確認項目の実施
- 修正による影響範囲の確認
- 追加実装に対する動作確認

### 4. PR説明の更新（必要な場合）

- 追加変更に伴う背景・目的の補足
- 追加変更に伴う変更内容の更新
- 追加の動作確認結果の追記
- レビュアーからの質問への回答をPR説明に反映

## チェックポイント

- [ ] circleci等のMCPツールを使ってCI失敗を確認したか
- [ ] 対応優先度が適切か（コンフリクト > CI > レビュー）
- [ ] 修正後にローカルで確認を実施しているか
- [ ] コミット・プッシュが適切に行われているか
- [ ] レビューコメントへの返信案を提示したか（実際の返信は人間が行う）
- [ ] 必要に応じてPR説明を更新しているか
