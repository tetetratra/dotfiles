---
name: skill-reflection
description: 現在リポジトリに配置されているスキルを改善するためのスキル。明示的に使用指示があった場合のみ使ってください。
---

## 目的
このスキルは、明示的にskill-reflectionスキルの使用指示があった場合のみ使ってください。

自身の作業を振り返り、リポジトリに配置されているclaudeスキルを改善します。
claudeスキルの改善により、次回以降の開発の効率化を目指します。

## 手順

1. 「スキルの改善候補」の収集
  - タスクの進行において行った作業を次の観点で振り返り、「スキルの改善候補」を集めてください（無い場合は無理に列挙する必要はありません）
    - 途中でユーザーから軌道修正や要望を受けた事柄
    - システムに関して勘違いをしたり、誤った情報を提供してしまった事柄
    - システムの理解をする上で、情報がまとめられておらず、調査に苦労した知識や手順
    - スキルを使った際に、スキルに記載されている情報が誤っていたり、不十分であった事柄
    - 定型的な手順を踏んだ作業であったにも関わらず、それがスキル化されていなかった事柄

2. 「スキルの改善候補」の選別
  - 「スキルの改善候補」のうち、以下のような内容は追加・更新の対象外となります。そのような内容は除外してください
    - 一般的な（リポジトリ固有ではない）プログラミング知識
    - 一時的な対応や実験的な試み
    - 作業におけるメモ的な情報や未確認の情報
    - 細かすぎる手順や、限定的なケースにしか適用されない情報

3. 既存スキルの確認
  - 既に定義済みのスキルのうち、「スキルの改善候補」に関連がありそうなスキルの中身を一通り確認してください

4. 「スキルの改善候補」の分類
  - 「スキルの改善候補」それぞれについて、次の手順で「対応方針」の分類を行ってください
    - if 既存スキルにその情報が記載済みだった場合
      - あなた(AI)がその既存スキルに気づけなかったということなので、「対応方針: 既存スキルの説明の改善」とします
    - else // 既存スキルにその情報が記載されていなかった場合
      - if 改善候補の内容を書くべきスキルが既に存在している場合
        - 「対応方針: 既存スキルの内容の改善」とします
      - else // 改善候補の内容を書くべきスキルが存在していない場合
        - 「対応方針: 新規スキルの追加」とします
  - 同じく「スキルの改善候補」それぞれについて、次の手順で「スキル種別」の分類を行ってください
    a. なにか作業をする際の手順を提供するスキル
    b. このアプリケーション・ドメインの固有の知識を提供するスキル
    c. 一般的な知識や、思考する際の価値観を提供するスキル

5. 改善内容の検討
  - 分類後の「スキルの改善候補」それぞれについて、対応方針に応じてその名前や内容を検討します。
    スキルの内容は「スキルの内容について」セクションを参考に考えてください。
    検討の結果、修正の取りやめや、改善候補1つにつき複数個のスキルの追加・更新が必要になっても構いません。
    - 対応方針: 既存スキルの説明の改善
      - 次に同じタスクを進める際に見落としが無いように、スキルの説明文を改善してください
    - 対応方針: 既存スキルの内容の改善
      - 既存スキルの内容を改善してください
    - 対応方針: 新規スキルの追加
      - 新規スキル名を決定し、その内容を検討してください
      - スキル種別に応じて、次のprefixをスキル名に付与してください
        - a: `procedure--` prefixを付けます
        - b: `domain--` prefixを付けます
        - c: `knowledge--` prefixを付けます

6. 追加・更新作業
  - スキルが置かれているディレクトリは、現在のリポジトリの `.claude/skills/` 配下です
    - ディレクトリが無い場合は作ってください
  - スキルのテンプレートに従って、スキルファイルの追加・更新を行ってください

7. ユーザーへの報告
  - 追加・更新が完了したら、ユーザーに対して以下の内容を報告してください
    - 追加・更新したスキルの一覧（スキル名と簡単な説明）
    - スキル改善により、次回以降の開発がどのように効率化されるかの説明
  - 行った更新が問題ないかをユーザーに聞き、問題なければコミットしてください
    - 問題がある場合は、ユーザーの指示に従って修正を行ってください
  - コミット方法
    - 複数スキルの追加・更新をした場合もコミットは1つにまとめてください
    - コミットメッセージにはどのようなスキルを追加・更新したかを簡潔に日本語で記載してください

## スキルの内容について

- スキルの内容は、できるだけ本質的な情報に絞り、簡潔にまとめてください
- 必要に応じてmermaid等を使用して、図解を追加することも有用です
- スキルは少しずつ改善することを目指しているため、一度に大量の情報をスキル化する必要はありません
- 分量が多くなってしまう場合は、重要な情報を優先的に記載したり、内容を分割して複数スキルにするなどの工夫をしてください
- 「具体例」「実行例」のような、理解の補助のみを目的とした情報（＝ドキュメントの情報量が増えない情報）は、スキルの内容には含めないでください
- スキルの分量について、スキル種別ごとに以下の分量に収めるようにしてください
  - a. 手順を提供するスキル
    - 新規作成時：50行以内
    - 更新時：100行以内
  - b. ドメイン固有の知識を提供するスキル
    - 新規作成時：20行以内
    - 更新時：50行以内
  - c. 一般的な知識や価値観を提供するスキル
    - 新規作成時：20行以内
    - 更新時：50行以内

## スキルのテンプレート
```
---
name: {スキル名（prefix付き）}
description: {そのスキルがどんな情報を提供するスキルなのかを簡潔に説明してください}
---

{スキルの内容を記載してください}
```

