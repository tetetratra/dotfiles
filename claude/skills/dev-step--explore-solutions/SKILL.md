---
description: タスクの解決方針を体系的に検討し、実装アプローチを決定する。
---

タスクに対する解決方針を体系的に検討し、実装アプローチを決定します。

**注意**
このコマンドは技術的な詳細設計を行うものではありません。
高レベルな解決アプローチと大まかな作業フローを整理することが目的です。
詳細な技術設計は以降のステップで行います。

## 出力物

このコマンドでは、以下の3つのカテゴリで出力を行います：

- **返答**: 作業完了の報告や調査結果の要約など、フロー型の出力（会話として返す）
- **成果物**: ドキュメントや整理結果など、ストック型の出力（後から参照できる形で返す）
  - 成果物の保存先について指示がある場合は、指定された箇所に書き込む
  - 指示がない場合は、通常のレスポンスとして返答の後に続けて出力する
- **作業**: システムへの変更や実行など、副作用を伴う作業

本コマンドの出力：

**返答**: 検討完了と推奨案の決定を報告する

**成果物**: `## 対応方針` セクションの本文をレスポンスとして出力する

**作業**: なし

## 目的

- タスクの解決アプローチを複数案で比較し、推奨方針を短く決める
- 高レベルな対応方針と作業フローを共有し、詳細設計への接続を明確にする

## 入力で確認すること

- 対象タスクのリンクと概要
- タスクの背景情報（task-backgroundで整理された内容）
- 前提条件・制約（task-conditionsで整理された内容）
- 関連ドキュメント・過去議論・類似事例
- 情報不足があれば、質問を列挙するか、仮置き前提として明示する
- 初出のみ関連資料や技術をリンクする

## 手順

1. **方針案の提示**: 実現可能なアプローチを1〜複数案挙げ、方向性レベルで説明する
2. **メリデメ整理**: 案ごとに差別化できるメリット・デメリットを短く列挙し、トレードオフを示す
3. **推奨案決定**: 実装コストとレビュー工数、リスクの小ささを加味して推奨案を明示し、その理由を簡潔に述べる（条件付き可）
4. **書式整形**: `## 対応方針` 配下に「方針案」「推奨案」を配置し、箇条書きで読みやすくする
5. **自己チェック**: 下記チェックリストで冗長さと妥当性、リンクの有無、粒度を確認する

ユーザーからフィードバックがあり、新しい方針案を設ける場合は、(既出の方針案を上書きするのではなく) 新たな案として追加してください。

## 成果物例

```
## 対応方針

### 方針案

#### 案1: OAuth 2.0 + JWT
- 方針: 新規認証基盤を構築し、APIゲートウェイ経由でレガシー連携。段階移行を前提。
- メリット: モバイル対応が容易、スケーラブル、モダンな実装。
- デメリット: レガシー連携の改修コストと学習コストがかかる。

#### 案2: SAML
- 方針: エンタープライズ向け基盤を導入し、既存認証を置き換え、SSOで統合。
- メリット: エンタープライズ標準で互換性が高く、移行リスクが低い。
- デメリット: モバイル実装が複雑、技術制約が多い。

### 推奨案
案1 (OAuth + JWT) を推奨。レガシー改修の実装コストはあるが、標準的な実装パターンのためレビュー工数は抑えられ、段階移行によりリスクも管理可能。将来性とモバイル対応を優先しつつ、金融要件はJWTの適切な設定で満たせる。長期的な保守性・拡張性で優位。
```

## チェックポイント
- [ ] 案ごとの差分とトレードオフが明確か
- [ ] 技術詳細に踏み込みすぎず、方向性レベルに留まっているか
- [ ] 推奨案と理由が簡潔に示されているか
- [ ] 参考資料や技術を初出でリンクしているか
- [ ] `## 対応方針` としてそのまま貼れる体裁か
