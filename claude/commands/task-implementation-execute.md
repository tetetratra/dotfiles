$1

実装計画に従って実際のコード実装を行います。

注意：このコマンドは、実装計画（ある場合）に従って実装するものです。
計画がある場合は、計画の変更や追加の検討は行わず、決定された計画に従って実装することが目的です。

## 出力物

このコマンドでは、以下の3つのカテゴリで出力を行います：

- **返答**: 作業完了の報告や調査結果の要約など、フロー型の出力（会話として返す）
- **成果物**: ドキュメントや整理結果など、ストック型の出力（後から参照できる形で返す）
  - 成果物の保存先について指示がある場合は、指定された箇所に書き込む
  - 指示がない場合は、通常のレスポンスとして返答の後に続けて出力する
- **作業**: システムへの変更や実行など、副作用を伴う作業

本コマンドの出力：

**返答**: 各ステップ完了時の報告、マイルストーン到達時の報告、問題発生時の報告、実装完了の報告

**成果物**: なし（ドキュメントは作成しない、実装のみ）

**作業**: コードの実装、テストの作成・実行、lintチェック、コミット実行

## 目的

- 実装計画（ある場合）に従ってコードを実装する
- 各ステップごとにテストとコミットを行う
- マイルストーン到達時にユーザーのレビューを受け、承認を得る
- 計画通りに進まない場合は計画を見直す

## 入力で確認すること

- 対象タスクのリンクと概要
- 実装計画（ある場合）
- 設計書（ある場合）
- ブランチ運用ルール
- テスト要件
- 情報が不足している場合は、着手前に質問を箇条書きする

## 手順

### 1. 実装計画の確認

- 実装計画がある場合は確認
- 現在のブランチ状態を確認
- docs配下のドキュメントファイル一覧を確認
  - 実装のガイドラインに関するドキュメントがあればそれを読む
  - コーディング規約、アーキテクチャガイド、ベストプラクティスなど
- 実装開始前のチェックリストを確認
  - 必要な環境変数は設定されているか
  - 依存パッケージはインストール済みか
  - マイグレーションは最新か

### 2. ステップごとの実装

各ステップについて以下を実行:

1. 実装前の確認
   - このステップで実装する内容を確認
   - 依存するステップが完了しているか確認

2. コードの実装
   - 計画がある場合はそれに従ってコードを実装
   - 設計書がある場合はその仕様に従う
   - コーディング規約に従う
   - コードを見るだけでは処理の意図が分からないような箇所には、コメントを記載する
     - なぜその処理が必要なのか
     - どのような前提条件があるのか
     - 特殊なケースへの対応など

3. テストの作成・実行
   - 実装したコードに対応するテストを作成（または更新）
   - テストを実行し、通過することを確認
   - テストが失敗した場合は修正

4. lintチェック
   - lintチェックを実行（設定されている場合）
   - エラーがあれば修正

5. コミット
   - 変更をステージング
   - 適切なメッセージでコミット

6. マイルストーン到達確認
   - このステップでマイルストーンに到達する場合は、次のステップに進む前に必ず以下を実行:
     1. マイルストーンで定義された動作確認があれば実施し、ユーザーに報告
     2. 実装を一時停止し、ユーザーにレビューを依頼
     3. ユーザーの確認・承認を待つ
     4. 承認後、次のマイルストーンに向けて実装を再開

7. 次のステップへ
   - マイルストーンに到達していない場合は、次のステップへ進む

### 3. 計画との乖離が発生した場合

以下のような場合は実装を中断し、状況を報告:

- 設計書の不備や矛盾が見つかった（設計書がある場合）
- 想定外の技術的制約が見つかった
- 既存コードの構造が想定と異なっていた
- テストが通らず、根本的な設計変更が必要
- 依存ライブラリの問題が見つかった

対応：
1. 現在の状況を説明
2. 問題の原因を分析
3. 以下のいずれかを提案:
   - 設計書がある場合はその修正
   - 実装計画がある場合はその修正
   - 軽微な調整で対応可能な場合はその場で修正

### 4. 実装完了確認

すべてのステップが完了したら以下を確認:

- [ ] 設計書がある場合、定義されたすべての項目が実装されているか
- [ ] すべてのテストが通過しているか
- [ ] コミット履歴が適切か（意味のある単位でコミットされているか）
- [ ] 不要なコメントアウトやデバッグコードが残っていないか

## チェックポイント

実装前：
- [ ] 実装計画を理解しているか
- [ ] docs配下のドキュメントを確認したか
- [ ] 実装のガイドラインに関するドキュメントがあれば読んだか
- [ ] 必要な環境設定は完了しているか
- [ ] 現在のブランチ状態は正しいか

各ステップ：
- [ ] 計画通りの内容を実装しているか
- [ ] コードを見るだけでは意図が分からない箇所にコメントを記載したか
- [ ] テストを作成・実行したか
- [ ] テストは通過したか
- [ ] lintチェックを実行したか（設定されている場合）
- [ ] 適切なタイミングでコミットしたか
- [ ] コミットメッセージは適切か

マイルストーン到達時：
- [ ] マイルストーンで定義された動作確認を実施したか
- [ ] 動作確認結果をユーザーに報告したか
- [ ] ユーザーのレビュー・承認を得たか
- [ ] 承認後に次のステップへ進んでいるか

実装完了時：
- [ ] すべてのステップが完了したか
- [ ] すべてのテストが通過したか
- [ ] 設計書がある場合、整合性があるか
- [ ] 不要なコード（コメントアウト、デバッグコード等）が残っていないか
- [ ] 計画にない変更を加えていないか（加えた場合は理由を明示）

計画との乖離：
- [ ] 計画通りに進まなかった場合、理由を明示したか
- [ ] 必要に応じて計画または設計の見直しを提案したか
