PRの背景・目的および変更内容セクションを体系的に作成し、PR概要欄を更新します。

## 使用例

```
/write-pr-background https://github.com/org/repo/pull/XXXXX のPRに対してお願いします
```

## 手順

1. **技術的な直接目的の把握**
   - PRの変更内容から、技術的に何を実現しようとしているかを整理する
   - 「このPRは何をするものか？」を明確にする

2. **根本目的の探索**
   - 「なぜその技術的変更が必要なのか？」を深掘りする
   - 単なる機能追加や修正ではなく、ビジネス上や運用上の課題を探る

3. **背景情報の収集**
   - PRのコメントにNotionリンクがあるかを確認し、あれば必ず参照する
   - PRに紐づくNotionチケット、GitHub Issue、コメントを確認
   - 過去の障害レポートや関連する議論を調査
   - 必要に応じて関連するチケットも確認する

4. **目的の連鎖整理**
   以下の3層で目的を段階的に整理し、それぞれを文章として明確に表現する：
   ```
   根本目的: ビジネス上の課題解決や障害防止など（なぜこの取り組みが必要か）
   ↓
   中間目的: 技術的な仕組みの改善や導入（どのような手段で解決するか）
   ↓
   直接的作業: 今回のPRで実際に行う変更内容（具体的に何をするか）
   ```

5. **背景・目的セクション作成**
   - 内容
       - 時系列で背景を説明（いつ何が起きたか）
       - 原因と根本原因を明確に分ける
       - なぜ今回の対応が必要かの論理的つながりを示す
       - 現状の問題と今回の解決アプローチを説明
       - 「◯◯な必要があり、本PRで対応しました」のように、PRの目的を明確に述べる
   - 記法
       - 基本的に見出しや太字は避け、文章で書く（バッククォートによる囲みは使用可）
       - ですます調で、全体として3〜7文程度のまとまりで記述する
       - 文ごとに改行を入れ、段落の区切りには空行を入れる
       - チケットやPR、出来事に対する言及はリンクとして記載する

6. **変更内容セクション作成**
   - PRの技術的変更内容を整理
   - 追加・修正・削除したファイルや機能の概要
   - 主要な変更ポイントを箇条書きで記述
   - コードレベルの変更よりも機能レベルでの変更に焦点を当てる
   - 変更にあたって実行したコマンド(rakeタスクなど)があれば記載する
   - 形式的な手順に則って変更を加えた場合は、その手順に関する説明も記載する

7. **PR概要欄への反映**
   - `gh pr edit` コマンドを使用してPRの概要欄を実際に更新する
   - `## 背景・目的` セクションを追加
   - `## 変更内容` セクションを追加
   - 既存のテンプレート構造を維持しながら新しいセクションを挿入

8. **チェックポイントの確認**

## 実行例

```bash
# 1. PRの技術的内容確認
gh pr view {PR番号}

# 2. 関連チケット確認
gh pr view {PR番号} --comments
# Notionチケットのリンクを見つけて内容確認

# 3. 目的連鎖の整理
# 根本目的 → 中間目的 → 直接的作業の流れを文章化

# 4. 背景・目的セクション作成
# - 障害・課題の発生
# - 原因分析
# - 解決の必要性
# - 現状の問題
# - 今回のアプローチ

# 5. 変更内容セクション作成
# - 技術的変更内容の整理
# - ファイル・機能の変更概要
# - 主要な変更ポイント

# 6. PR概要欄への反映
gh pr edit {PR番号} --body "更新されたPR本文"
# - ## 背景・目的セクションを追加
# - ## 変更内容セクションを追加
```

## チェックポイント

- [ ] 根本的な「なぜ」が明確になっているか
- [ ] 技術的変更とビジネス価値のつながりが説明されているか
- [ ] 時系列が整理されているか
- [ ] 読み手が背景を理解できる情報が含まれているか
- [ ] 今回の対応の妥当性が伝わるか
- [ ] ですます調の文章構成になっているか
- [ ] 文章が3〜7文程度のまとまりで記述されているか
- [ ] 文ごとに改行され、段落の区切りには空行が入っているか
- [ ] チケットやPRの言及がリンクとして記載されているか
- [ ] `## 背景・目的` セクションがPR概要欄に追加されているか
- [ ] `## 変更内容` セクションがPR概要欄に追加されているか
- [ ] 主要な技術的変更が変更内容セクションに記載されているか
- [ ] PR概要欄が実際に `gh pr edit` コマンドで更新されているか
