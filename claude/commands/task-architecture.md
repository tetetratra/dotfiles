タスクの技術アーキテクチャを詳細設計し、実装可能なレベルまで具体化します。

**注意**
このコマンドは `task-solution.md` で決定した高レベルな解決アプローチを、詳細な技術仕様に落とし込むものです。
実装に必要な具体的な設計情報を整理することが目的です。

## 使用例

```
/task-architecture Notionのこのチケット https://notion.so/xxxxx に対して技術アーキテクチャセクションを作成してください
```

## 作業手順

### 1. 設計方法
#### 1.1 前提条件の整理
- [ ] task-background.md と task-solution.md の内容を確認
- [ ] 既存システムの関連部分を調査
- [ ] 技術的制約と非機能要件を整理

#### 1.2 アーキテクチャ検討
- [ ] コンポーネント構成を設計
- [ ] データフローと処理フローを整理
- [ ] インターフェース仕様を定義
- [ ] 既存システムとの連携方法を決定

#### 1.3 詳細設計
- [ ] 必要なファイル・クラス・メソッドを特定
- [ ] データベース設計（テーブル・カラム・関係性）
- [ ] API仕様やUIコンポーネント設計
- [ ] 設定やデプロイに関する考慮事項を整理

### 2. 文体の統一
- [ ] すべての文章をですます調で統一
- [ ] 箇条書きの末尾に「。」をつけない
- [ ] 複雑な熟語を使わず平易な日本語で説明
- [ ] 一文が長すぎる場合は適宜改行・分割
- [ ] 句点ごとに改行を入れる
- [ ] 文書の過剰な装飾を削除（過度な大文字の多用を避ける）

### 3. 形式の調整
- [ ] 指定テンプレートから不足・不要な欄を自主的に判断
- [ ] 機能によってテーブルやAPIが無い場合は該当項目をスキップ
- [ ] 実装者が迷わないレベルまで具体化
- [ ] 指定のテンプレート形式で出力
- [ ] `## 設計` セクションを指定場所に追加

### 4. 実装準備の確認
- [ ] task-implementation.md での実装タスクに分解できるか
- [ ] 不明点や未決定事項が残っていないか

## 実行例

```bash
# 1. 前提条件確認
# task-background.md と task-solution.md の内容確認
# 既存システムの関連コード調査

# 2. アーキテクチャ設計
# コンポーネント構成とデータフロー設計
# インターフェース仕様定義

# 3. 詳細設計
# ファイル・クラス・メソッド特定
# データベース設計
# API・UI設計

# 4. テンプレート形式で出力
# ## 技術アーキテクチャセクションを指定場所に追加
```

## 出力例 (テンプレート)

```
## 設計

### アーキテクチャ構成
（この実装がどのようなコンポーネントで構成されるかを説明）
（既存のシステムとの連携方法も含める）
（データの流れや処理の流れも説明）

### クラス設計

- app/
  - controllers/
    - xxx_controller.rb
      - （このファイルで実装する内容と役割を説明）
      - #show
        - （実装予定のメソッドは全て列挙する必要はありません。重要だと判断したメソッドのみ列挙してください）
        - （実装内容が複雑なメソッドであれば説明を簡潔に記載してください。単純な処理であれば説明は不要です）
        - （文がごちゃつくので、引数の詳細を書いたりその説明をしたりする必要はありません）
  - models/
    - ...
  - views/
    - ...
  - ...

### データベース設計
- xxx テーブル
  - （このテーブルを作成・変更する理由と用途を説明）
  - （他テーブルとの関係性、インデックス設計も記載）
  - カラム設計:
    - column_name: データ型 - 用途説明
    - ...
- yyy テーブル

（データベースに無関係な実装の場合はこのセクションをスキップ）
（この実装に関係しないテーブルについては説明不要）

### API設計
- POST /api/xxx
  - （このエンドポイントの用途と処理内容を説明）
  - リクエスト: { "param": "value" }
  - レスポンス: { "result": "success" }
- GET /api/yyy

（APIが不要な実装の場合はこのセクションをスキップ）

### UI設計
（フロントエンド実装が必要な場合、どのようなコンポーネント・画面を実装するかを記載）
（既存UIの変更点も含める）
（UI実装が不要な場合はこのセクションをスキップ）

### 設定・デプロイ
（実装に必要な環境設定、デプロイ手順、マイグレーション等を記載）
（既存システムへの影響も含める）
（設定・デプロイに関係しない場合はこのセクションをスキップ）
```

## チェックポイント

- [ ] task-solution.mdの方針が詳細な技術仕様に落とし込まれているか
- [ ] 実装者が迷わないレベルまで具体化されているか
- [ ] 既存システムとの連携方法が明確になっているか
- [ ] 必要なファイル・クラス・メソッドが特定されているか
- [ ] データベース設計が完了しているか
- [ ] API・UI仕様が定義されているか（必要な場合）
- [ ] ですます調の文章構成になっているか
- [ ] 箇条書きの末尾に「。」がついていないか
- [ ] 複雑な熟語を使わず平易な日本語で説明されているか
- [ ] 一般的な技術の説明を避け、実装特有の内容にフォーカスしているか
- [ ] 不要な装飾や過度な大文字使用を避けているか
- [ ] `## 設計` セクションが指定場所に追加されているか
- [ ] task-implementation.mdでの実装タスクに分解できる状態か
- [ ] 不明点や未決定事項が残っていないか
