タスクの対応方針を判定し、非自明な場合は実装手順を体系的に定義してチケットに記載します。

**注意**: このコマンドは技術的な詳細設計を行うものではありません。高レベルな解決アプローチと大まかな作業フローを整理することが目的です。詳細な技術設計は `task-design.md` で行います。

## 使用例

```
/task-solution Notionのこのチケット https://notion.so/xxxxx に対して対応方針セクションを作成してください
```

## 手順

1. **解決案の自明性判定**
   - 一般的なパターンや既存実装の延長で解決できるかを確認
   - 技術選択肢が実質的に一つに絞られるかを判断
   - 過去の類似ケースで確立された方法があるかを調査

2. **検討すべき案数の決定**
   - 自明案がある場合：チケットに追記せず「対応方針は自明」とユーザーに回答
   - 非自明だが唯一の案がある場合：単一案のみを検討してチケットに記載
   - 複数の有力な選択肢がある場合：2-3案の比較検討してチケットに記載
   - 考えすぎて物事を複雑にすることを避ける

3. **技術的制約・要件の整理**
   - ビジネス要求から技術的制約を抽出
   - 既存システムとの関係性や互換性要件を確認
   - パフォーマンスやセキュリティ等の非機能要件を整理

4. **実装手順の構造化**（非自明案のみ）
   - 対応方針を実現するための主要ステップを3-7個程度で整理
   - 作業の流れレベルで記述し、詳細な技術仕様は避ける
   - task-design.md での詳細設計につながる粒度で作成

5. **対応方針セクション作成**（非自明案のみ）
   - 内容
       - 選択した技術的アプローチと選定理由を説明
       - 80%の確信があれば十分とし、完璧を求めすぎない
       - 大まかな実装手順を箇条書きで記載
       - 後から調整可能な部分は詳細化を避ける
   - 記法
       - 解決アプローチは文章で記述（ですます調）
       - 実装手順は箇条書き形式で記述
       - 文ごとに改行を入れ、段落の区切りには空行を入れる
       - 関連技術や参考資料があればリンクとして記載

6. **結果の回答**
   - 自明案の場合：「このタスクの対応方針は自明です」とユーザーに回答
   - 非自明案の場合：指定された場所に `## 対応方針` セクションを追加

7. **実装準備の妥当性確認**（非自明案のみ）
   - 技術的実現可能性が明確か
   - 実装タスクに分解できるか

## 実行例

```bash
# 1. 解決案の自明性確認
# 既存システムの類似機能や一般的なパターンを確認
# 技術選択肢の数を把握

# 2. 自明性による分岐
# 【自明案の場合】
# - ユーザーに「このタスクの対応方針は自明です」と回答
# - チケットには何も追記しない
# - 処理終了

# 【非自明案の場合】
# - アプローチ検討に進む

# 3. アプローチ検討（非自明案のみ）
# 【単一案】技術的制約と実現可能性の確認
# 【比較案】2-3案のトレードオフ分析

# 4. 対応方針の文章化（非自明案のみ）
# - 技術的アプローチの概要
# - 選定理由（必要な場合のみ）

# 5. 実装手順の構造化（非自明案のみ）
# - 主要ステップの洗い出し（3-7個）
# - 作業フローの整理
# - 依存関係の確認

# 6. 指定場所への反映（非自明案のみ）
# ## 対応方針セクションを追加
# - 解決アプローチ（文章）
# - ### 実装手順（箇条書き）
```

## チェックポイント

**共通項目:**
- [ ] 解決案の自明性が適切に判定されているか
- [ ] 考えすぎて複雑化していないか

**自明案の場合:**
- [ ] 「このタスクの対応方針は自明です」とユーザーに回答したか
- [ ] チケットに何も追記していないか

**非自明案の場合:**
- [ ] 技術的制約・要件が整理されているか
- [ ] 選択したアプローチの妥当性が示されているか
- [ ] 実装手順が適切な粒度で記載されているか
- [ ] ですます調の文章構成になっているか
- [ ] 実装手順が3-7ステップで構成されているか
- [ ] 詳細すぎる技術仕様を避けているか
- [ ] 関連技術や参考資料がリンクとして記載されているか
- [ ] `## 対応方針` セクションが指定場所に追加されているか
- [ ] task-design.mdでの詳細設計につながる内容か
- [ ] 80%の確信レベルで実装に進める状態か
